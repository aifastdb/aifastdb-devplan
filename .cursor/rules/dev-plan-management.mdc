---
description: DevPlan å¼€å‘è®¡åˆ’ç®¡ç†å·¥å…·ã€‚å½“ç”¨æˆ·æåˆ°å¼€å‘è®¡åˆ’ã€ä»»åŠ¡è¿›åº¦ã€æ–‡æ¡£ç®¡ç†ã€æˆ–è¯´"å¼€å§‹/ç»§ç»­/æ¢å¤/å¯åŠ¨ phase-X"æ—¶æ¿€æ´»ã€‚
globs: []
alwaysApply: true
---

# DevPlan â€” å¼€å‘è®¡åˆ’ç®¡ç†

## MCP Server

```
mcpServers: aifastdb-devplan
```

## âš ï¸ å…³é”®è§„åˆ™ï¼šå¼€å‘é˜¶æ®µè§¦å‘è¯è¯†åˆ«

**å½“ç”¨æˆ·è¯´å‡ºä»¥ä¸‹ä»»ä½•æ¨¡å¼æ—¶ï¼Œå¿…é¡»é¦–å…ˆè°ƒç”¨ `devplan_start_phase` å·¥å…·**ï¼ˆå°†ä¸»ä»»åŠ¡æ ‡è®°ä¸º in_progressï¼‰ï¼š

| ç”¨æˆ·è¯´æ³•ç¤ºä¾‹ | åŠ¨ä½œ |
|---|---|
| "è¯·å¼€å§‹ phase-37 çš„ä»»åŠ¡" | â†’ `devplan_start_phase(taskId: "phase-37")` |
| "å¼€å§‹ phase-37" / "å¼€å§‹å¼€å‘ phase-37" | â†’ `devplan_start_phase(taskId: "phase-37")` |
| "å¼€å§‹å¼€å‘ phase-37 çš„ä»»åŠ¡" | â†’ `devplan_start_phase(taskId: "phase-37")` |
| "ç»§ç»­ phase-37" / "ç»§ç»­å¼€å‘ phase-37" | â†’ `devplan_start_phase(taskId: "phase-37")` |
| "ç»§ç»­å¼€å‘ phase-37 çš„ä»»åŠ¡" | â†’ `devplan_start_phase(taskId: "phase-37")` |
| "æ¢å¤ phase-37" / "æ¢å¤ phase-37 å¼€å‘" | â†’ `devplan_start_phase(taskId: "phase-37")` |
| "å¯åŠ¨ phase-37" / "å¯åŠ¨ phase-37 å¼€å‘" | â†’ `devplan_start_phase(taskId: "phase-37")` |

**è¯†åˆ«è§„åˆ™**ï¼šåªè¦ç”¨æˆ·æ¶ˆæ¯ä¸­åŒ…å« `phase-` + æ•°å­—ï¼Œä¸”åŒæ—¶åŒ…å«"å¼€å§‹"ã€"ç»§ç»­"ã€"æ¢å¤"ã€"å¯åŠ¨"ã€"start"ã€"resume"ä¸­çš„ä»»æ„ä¸€ä¸ªè¯ï¼Œå°±å¿…é¡»è°ƒç”¨ `devplan_start_phase`ã€‚

**å·¥å…·æ˜¯å¹‚ç­‰çš„**ï¼šé¦–æ¬¡è°ƒç”¨ = å¯åŠ¨ï¼ˆpending â†’ in_progressï¼‰ï¼Œåç»­è°ƒç”¨ = æ¢å¤ï¼ˆå·²å®Œæˆå­ä»»åŠ¡ä¿æŒ completedï¼‰ã€‚

## å¿«æ·æ“ä½œ

### åˆå§‹åŒ– / æŸ¥çœ‹ç°æœ‰è®¡åˆ’
```
devplan_init()                                    # åˆ—å‡ºæ‰€æœ‰å·²æœ‰è®¡åˆ’
devplan_init(projectName: "my-project")           # åˆå§‹åŒ–æ–°è®¡åˆ’
```

### æŸ¥çœ‹é¡¹ç›®è¿›åº¦
```
devplan_get_progress(projectName: "<é¡¹ç›®å>")
```

### æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨
```
devplan_list_tasks(projectName: "<é¡¹ç›®å>")                             # åˆ—å‡ºæ‰€æœ‰ä¸»ä»»åŠ¡
devplan_list_tasks(projectName: "<é¡¹ç›®å>", parentTaskId: "phase-1")    # æŒ‡å®šä¸»ä»»åŠ¡çš„å­ä»»åŠ¡
devplan_list_tasks(projectName: "<é¡¹ç›®å>", status: "pending")          # è·¨æ‰€æœ‰ä¸»ä»»åŠ¡æŸ¥è¯¢æœªå®Œæˆå­ä»»åŠ¡
```

### åˆ›å»ºä»»åŠ¡
```
devplan_create_main_task(projectName: "<é¡¹ç›®å>", taskId: "phase-1", title: "é˜¶æ®µä¸€", priority: "P0")
devplan_add_sub_task(projectName: "<é¡¹ç›®å>", taskId: "T1.1", parentTaskId: "phase-1", title: "å­ä»»åŠ¡")
devplan_upsert_task(...)   # å¹‚ç­‰å¯¼å…¥ï¼ˆæ¨èæ‰¹é‡å¯¼å…¥ä½¿ç”¨ï¼‰
```

### å®Œæˆä»»åŠ¡
```
devplan_complete_task(projectName: "<é¡¹ç›®å>", taskId: "T1.1")         # å®Œæˆå­ä»»åŠ¡ï¼ˆè‡ªåŠ¨æ›´æ–°è¿›åº¦ï¼‰
devplan_complete_task(projectName: "<é¡¹ç›®å>", taskId: "phase-1", taskType: "main")  # æ‰‹åŠ¨å®Œæˆä¸»ä»»åŠ¡
```

### Git åŒæ­¥æ£€æŸ¥
```
devplan_sync_git(projectName: "<é¡¹ç›®å>", dryRun: true)   # å…ˆé¢„è§ˆ
devplan_sync_git(projectName: "<é¡¹ç›®å>")                  # å®é™…æ‰§è¡Œå›é€€
```

### æ–‡æ¡£ç®¡ç†
```
devplan_save_section(projectName: "<é¡¹ç›®å>", section: "overview", title: "æ¦‚è¿°", content: "...")
devplan_list_sections(projectName: "<é¡¹ç›®å>")
devplan_get_section(projectName: "<é¡¹ç›®å>", section: "overview")
devplan_export_markdown(projectName: "<é¡¹ç›®å>", scope: "tasks")
```

### åŠŸèƒ½æ¨¡å—
```
devplan_create_module(projectName: "<é¡¹ç›®å>", moduleId: "auth", name: "è®¤è¯æ¨¡å—")
devplan_list_modules(projectName: "<é¡¹ç›®å>")
devplan_get_module(projectName: "<é¡¹ç›®å>", moduleId: "auth")
```

## æ•°æ®å­˜å‚¨

æ•°æ®å­˜å‚¨åœ¨é¡¹ç›®å†… `.devplan/` ç›®å½•ï¼ˆJSONL æ ¼å¼ï¼‰ï¼Œå¤©ç„¶è·Ÿéš Git ç‰ˆæœ¬ç®¡ç†ï¼š

```
.devplan/{projectName}/
â”œâ”€â”€ documents.jsonl    # æ–‡æ¡£ç‰‡æ®µ
â”œâ”€â”€ tasks.jsonl        # ä¸»ä»»åŠ¡ + å­ä»»åŠ¡
â””â”€â”€ modules.jsonl      # åŠŸèƒ½æ¨¡å—
```

## å¯åŠ¨/æ¢å¤å¼€å‘é˜¶æ®µ

```
devplan_start_phase(projectName: "<é¡¹ç›®å>", taskId: "phase-X")
# è‡ªåŠ¨å°†ä¸»ä»»åŠ¡æ ‡è®°ä¸º in_progressï¼Œè¿”å›å…¨éƒ¨å­ä»»åŠ¡åˆ—è¡¨ï¼ˆå«å·²å®ŒæˆçŠ¶æ€ï¼‰
# AI åº”å°†è¿”å›çš„å­ä»»åŠ¡åˆ›å»ºä¸º Cursor TodoListï¼ˆä½¿ç”¨ TodoWriteï¼‰
# å¹‚ç­‰æ“ä½œï¼šé¦–æ¬¡è°ƒç”¨=å¯åŠ¨ï¼Œå†æ¬¡è°ƒç”¨=æ¢å¤ï¼ˆå·²å®Œæˆå­ä»»åŠ¡ä¿æŒ completedï¼‰
```

### å¼€å‘é˜¶æ®µå·¥ä½œæµ

1. **å¯åŠ¨/æ¢å¤**ï¼š`devplan_start_phase` â†’ å°†å­ä»»åŠ¡è½¬ä¸º TodoWriteï¼ˆä¿ç•™å·²å®ŒæˆçŠ¶æ€ï¼‰â†’ è¾“å‡ºè¿›åº¦æ‘˜è¦ â†’ å¼€å§‹ç¬¬ä¸€ä¸ª pending ä»»åŠ¡
2. **å¼€å‘ä¸­**ï¼šå®Œæˆä»£ç å â†’ `devplan_complete_task` å›å†™çŠ¶æ€ â†’ æ›´æ–° Todo â†’ ç»§ç»­ä¸‹ä¸€ä¸ª
3. **é˜¶æ®µå®Œæˆ**ï¼šæ‰€æœ‰å­ä»»åŠ¡å®Œæˆåï¼Œdevplan è‡ªåŠ¨æ ‡è®°ä¸»ä»»åŠ¡ä¸º completed

### é˜¶æ®µå®Œæˆ â†’ ä¸‹ä¸€é˜¶æ®µæç¤º

å½“ä¸»ä»»åŠ¡å®Œæˆæ—¶ï¼ˆå­ä»»åŠ¡å…¨éƒ¨å®Œæˆè‡ªåŠ¨è§¦å‘ï¼Œæˆ–æ‰‹åŠ¨å®Œæˆï¼‰ï¼Œ`devplan_complete_task` è¿”å›ç»“æœä¸­ä¼šåŒ…å«ä»¥ä¸‹é¢å¤–å­—æ®µï¼š

```json
{
  "nextPhase": {           // ä¸‹ä¸€ä¸ªå¾…å¤„ç†çš„ä¸»ä»»åŠ¡ï¼ˆä¼˜å…ˆ in_progressï¼Œå…¶æ¬¡ pendingï¼ŒæŒ‰ order æ’åºï¼‰
    "taskId": "phase-17",
    "title": "é˜¶æ®µåä¸ƒ: XXX",
    "status": "pending",
    "priority": "P0"
  },
  "remainingPhases": 3,    // å‰©ä½™æœªå®Œæˆé˜¶æ®µæ•°
  "hint": "ğŸ‰ ... è¿˜æœ‰ 3 ä¸ªå¾…å¤„ç†é˜¶æ®µã€‚ä¸‹ä¸€ä¸ªï¼šphase-17 ...ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ"
}
```

**AI åº”éµå¾ªçš„è¡Œä¸º**ï¼š
- åœ¨é˜¶æ®µå®Œæˆæ€»ç»“çš„**æœ€å**ï¼Œå±•ç¤º `hint` çš„å†…å®¹
- å¦‚æœ `nextPhase` å­˜åœ¨ï¼Œå‘ŠçŸ¥ç”¨æˆ·ä¸‹ä¸€ä¸ªé˜¶æ®µä¿¡æ¯å¹¶è¯¢é—®æ˜¯å¦ç»§ç»­
- å¦‚æœ `remainingPhases === 0`ï¼Œæ­å–œç”¨æˆ·æ‰€æœ‰é˜¶æ®µå…¨éƒ¨å®Œæˆ
- ç”¨æˆ·å›å¤"ç»§ç»­"/"å¼€å§‹ phase-X" æ—¶ï¼ŒæŒ‰è§¦å‘è¯è§„åˆ™è°ƒç”¨ `devplan_start_phase`

## æ³¨æ„äº‹é¡¹

1. **é€šè¿‡ MCP æ“ä½œä»»åŠ¡**ï¼šä»»åŠ¡çŠ¶æ€ç®¡ç†ä½¿ç”¨ `devplan_*` ç³»åˆ— MCP å·¥å…·ï¼Œä¸è¦æ‰‹åŠ¨ç¼–è¾‘ JSONL æ–‡ä»¶
2. **å®Œæˆä»»åŠ¡ååŒæ­¥**ï¼šå®Œæˆä»£ç å®ç°åï¼Œè°ƒç”¨ `devplan_complete_task` æŒä¹…åŒ–çŠ¶æ€ï¼ˆè‡ªåŠ¨é”šå®š Git commitï¼‰
3. **Git å›æ»šåæ£€æŸ¥**ï¼šå¦‚æœæ‰§è¡Œäº† `git reset` æˆ–åˆ‡æ¢åˆ†æ”¯ï¼Œè¿è¡Œ `devplan_sync_git` æ£€æŸ¥ä»»åŠ¡çŠ¶æ€ä¸€è‡´æ€§
